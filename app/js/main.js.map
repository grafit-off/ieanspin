{"version":3,"sources":["main.js"],"names":["document","addEventListener","body","querySelector","isMobileDevice","test","navigator","userAgent","isiPhone","documentElement","style","match","isiPad","isiPod","disableScroll","pagePosition","window","scrollY","scrollBehavior","classList","add","dataset","position","top","enableScroll","parseInt","remove","scroll","left","removeAttribute","animItems","querySelectorAll","forEach","el","elementInViewport","element","offsetTop","offsetBottom","delay","bounds","getBoundingClientRect","height","innerHeight","transitionDelay","hasAttribute","length","modalButtons","lockPadding","modalCloseButtons","currentCloseBtn","bodyWasNotLock","previousActiveElement","unlock","isMultipleClick","index","modalCurrentButton","e","modalName","path","curentModal","getElementById","modalOpen","setTimeout","focus","preventDefault","console","log","modalClose","closest","activeElement","modalActive","lockPaddingValue","innerWidth","offsetWidth","paddingRight","contains","bodyLock","target","doUnlock","which","Element","prototype","css","node","this","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],"mappings":"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","file":"main.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\t// Includes\r\n\t// // Variables\r\nconst body = document.querySelector('.body');\r\nconst isMobileDevice = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\nconst isSmoothScrollSupported = 'scrollBehavior' in document.documentElement.style;\r\n;\r\n\t// // scrollLockIOS\r\n// Iphones\r\nconst isiPhone = (navigator.userAgent.match(/iPhone/i) != null);\r\nconst isiPad = (navigator.userAgent.match(/iPad/i) != null);\r\nconst isiPod = (navigator.userAgent.match(/iPod/i) != null);\r\n\r\n// Выключение скролла\r\nlet disableScroll = () => {\r\n\tlet pagePosition = window.scrollY;\r\n\tdocument.querySelector('html').style.scrollBehavior = 'auto';\r\n\tdocument.body.classList.add('ios-lock');\r\n\tdocument.body.dataset.position = pagePosition;\r\n\tdocument.body.style.top = -pagePosition + 'px';\r\n}\r\n\r\n// Включение скролла\r\nlet enableScroll = () => {\r\n\tlet pagePosition = parseInt(document.body.dataset.position, 10);\r\n\tdocument.body.style.top = 'auto';\r\n\tdocument.body.classList.remove('ios-lock');\r\n\twindow.scroll({ top: pagePosition, left: 0 });\r\n\tdocument.querySelector('html').removeAttribute('style');\r\n\tdocument.body.removeAttribute('data-position');\r\n}\r\n\r\n// Слушатель на один элемент\r\nlet scrollLock_BtnListener = (item) => {\r\n\titem.addEventListener('click', (e) => {\r\n\t\titem.classList.toggle('scroll')\r\n\t\tif (item.classList.contains('scroll')) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tenableScroll();\r\n\t\t}\r\n\t});\r\n};\r\n\t// // Animate On Scroll\r\n// class=\"animate-item\" data-animation='from-left'  data-delay=\"0.5\" data-animation-once\r\nconst animItems = document.querySelectorAll(\".animate-item\");\r\nif (!isMobileDevice) {\r\n\tconst elementInViewport = (element, offsetTop, offsetBottom, delay = 0) => {\r\n\t\tlet bounds = element.getBoundingClientRect();\r\n\t\tif (element.dataset.delay) delay = element.dataset.delay;\r\n\r\n\t\tif ((bounds.top + bounds.height - bounds.height * offsetBottom > 0) && (window.innerHeight - bounds.top - bounds.height * offsetTop > 0)) {\r\n\t\t\telement.classList.add(\"animated\");\r\n\t\t\telement.style.transitionDelay = `${delay}s`;\r\n\t\t} else if (!element.hasAttribute(\"data-animation-once\")) {\r\n\t\t\telement.classList.remove(\"animated\");\r\n\t\t}\r\n\t};\r\n\tif (animItems.length != 0) {\r\n\t\tanimItems.forEach(el => {\r\n\t\t\telementInViewport(el, .5, .5);\r\n\t\t})\r\n\t\tdocument.addEventListener('scroll', () => {\r\n\t\t\tanimItems.forEach(el => {\r\n\t\t\t\telementInViewport(el, .5, .5);\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n} else {\r\n\tanimItems.forEach((el) => {\r\n\t\tel.classList.add('animated')\r\n\t});\r\n}\r\n// -- //\r\n;\r\n\t// // MODAL\r\n\r\n// vars\r\nconst modalButtons = document.querySelectorAll('.modal-btn');\r\nconst lockPadding = document.querySelectorAll('.fixed-padding');\r\nconst modalCloseButtons = document.querySelectorAll('.close-modal');\r\nconst timeout = 800;\r\nlet currentCloseBtn;\r\nlet unlock = true;\r\nlet isMultipleClick = false;\r\nlet bodyWasNotLock;\r\n\r\n// Проверки\r\nif (typeof (disableScroll) !== 'function' && typeof (enableScroll) !== 'function') {\r\n\tconsole.log(`Тип данных переменных \"disableScroll\" и \"enableScroll\": \"${typeof (disableScroll)} и ${typeof (enableScroll)}\"! Для IOS НЕ будет выполнятся скрипт scrollLockIOS`);\r\n}\r\n// -- //\r\nif (modalButtons.length > 0) {\r\n\tfor (let index = 0; index < modalButtons.length; index++) {\r\n\t\tconst modalCurrentButton = modalButtons[index];\r\n\t\tmodalCurrentButton.addEventListener(\"click\", function (e) {\r\n\t\t\tconst modalName = modalCurrentButton.dataset.path;\r\n\t\t\tconst curentModal = document.getElementById(modalName);\r\n\t\t\tif (curentModal != null) {\r\n\t\t\t\tmodalOpen(curentModal);\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tmodalCloseButtons.forEach((el) => {\r\n\t\t\t\t\t\tel.focus()\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 100)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(`Модальное окно не существует! ${curentModal}`);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nif (modalCloseButtons.length > 0) {\r\n\tfor (let index = 0; index < modalCloseButtons.length; index++) {\r\n\t\tconst el = modalCloseButtons[index];\r\n\t\tcurrentCloseBtn = el;\r\n\t\tel.addEventListener('click', function (e) {\r\n\t\t\tmodalClose(el.closest('.modal'));\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t}\r\n}\r\nlet previousActiveElement;\r\nfunction modalOpen(curentModal) {\r\n\tif (curentModal && unlock) {\r\n\t\tpreviousActiveElement = document.activeElement;\r\n\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\tif (modalActive) {\r\n\t\t\tmodalClose(modalActive, false);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbodyLock();\r\n\t\t}\r\n\t\tcurentModal.classList.add('open');\r\n\r\n\t\tcurentModal.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tif (isMultipleClick === false) {\r\n\t\t\t\tif (!e.target.closest('.modal__content')) {\r\n\t\t\t\t\tmodalClose(e.target.closest('.modal'));\r\n\t\t\t\t}\r\n\t\t\t\tisMultipleClick = true;\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tisMultipleClick = false;\r\n\t\t\t\t}, timeout);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nfunction modalClose(modalActive, doUnlock = true) {\r\n\tif (unlock) {\r\n\t\tmodalActive.classList.remove('open');\r\n\t\tif (doUnlock) {\r\n\t\t\tbodyUnlock();\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function () {\r\n\t\tpreviousActiveElement.focus();\r\n\t}, timeout);\r\n\r\n}\r\n\r\nfunction bodyLock() {\r\n\tconst lockPaddingValue = window.innerWidth - body.offsetWidth + 'px';\r\n\tif (lockPadding.length > 0) {\r\n\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\tconst el = lockPadding[index];\r\n\t\t\tel.style.paddingRight = lockPaddingValue;\r\n\t\t}\r\n\t}\r\n\tbody.style.paddingRight = lockPaddingValue;\r\n\tif (!body.classList.contains('lock')) {\r\n\t\tbodyWasNotLock = true;\r\n\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\tdisableScroll();\r\n\t\t} else {\r\n\t\t\tbody.classList.add('lock');\r\n\t\t}\r\n\t} else {\r\n\t\tbodyWasNotLock = false;\r\n\t}\r\n\tunlock = false;\r\n\tsetTimeout(function () {\r\n\t\tunlock = true;\r\n\t}, timeout);\r\n}\r\n\r\nfunction bodyUnlock() {\r\n\tsetTimeout(function () {\r\n\t\tif (lockPadding.length > 0) {\r\n\t\t\tfor (let index = 0; index < lockPadding.length; index++) {\r\n\t\t\t\tconst el = lockPadding[index];\r\n\t\t\t\tel.style.paddingRight = '0px';\r\n\t\t\t}\r\n\t\t}\r\n\t\tbody.style.paddingRight = '0px';\r\n\t\tif (bodyWasNotLock == true) {\r\n\t\t\tif (isiPhone || isiPad || isiPod) {\r\n\t\t\t\tenableScroll();\r\n\t\t\t} else {\r\n\t\t\t\tbody.classList.remove('lock');\r\n\t\t\t}\r\n\t\t}\r\n\t}, timeout);\r\n}\r\n\r\ndocument.addEventListener('keydown', function (e) {\r\n\tif (document.querySelector('.modal.open')) {\r\n\t\tif (e.which === 27) {\r\n\t\t\tconst modalActive = document.querySelector('.modal.open');\r\n\t\t\tmodalClose(modalActive);\r\n\t\t}\r\n\t}\r\n});\r\n(function () {\r\n\tif (!Element.prototype.closest) {\r\n\t\tElement.prototype.closest = function (css) {\r\n\t\t\tvar node = this;\r\n\t\t\twhile (node) {\r\n\t\t\t\tif (node.matches(css)) return node;\r\n\t\t\t\telse node = node.parentElement;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t}\r\n})();\r\n(function () {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.matchesSelector ||\r\n\t\t\tElement.prototype.webkitMatchesSelector ||\r\n\t\t\tElement.prototype.mozMatchesSelector ||\r\n\t\t\tElement.prototype.msMatchesSelector;\r\n\t}\r\n})();;\r\n\t// -- //\r\n})"]}